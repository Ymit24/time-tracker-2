version: "3.8"

services:
  app:
    image: stuff-time-tracker-9eclty-app:latest
    # or build via Dokploy if it supports Swarm builds; otherwise push to a registry
    deploy:
      labels:
        - traefik.enable=true
        - traefik.http.routers.time.rule=Host(`time.christiansmith.live`)
        - traefik.http.routers.time.entrypoints=websecure
        - traefik.http.routers.time.tls=true
        - traefik.http.routers.time.tls.certresolver=letsencrypt
        - traefik.http.services.time.loadbalancer.server.port=80
      replicas: 1
    networks:
      - dokploy-network

networks:
  dokploy-network:
    external: true
